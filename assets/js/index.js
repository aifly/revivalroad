webpackJsonp([0],{0:function(module,exports,__webpack_require__){try{(function(){"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var _createClass=function(){function t(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,i,a){return i&&t(e.prototype,i),a&&t(e,a),e}}(),_get=function(t,e,i){for(var a=!0;a;){var n=t,r=e,o=i;a=!1,null===n&&(n=Function.prototype);var s=Object.getOwnPropertyDescriptor(n,r);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(o)}var u=Object.getPrototypeOf(n);if(null===u)return;t=u,e=r,i=o,a=!0,s=u=void 0}},_react=__webpack_require__(1),_react2=_interopRequireDefault(_react),_reactDom=__webpack_require__(32),_reactDom2=_interopRequireDefault(_reactDom),_jquery=__webpack_require__(172),_jquery2=_interopRequireDefault(_jquery),_iscroll=__webpack_require__(173),_iscroll2=_interopRequireDefault(_iscroll);__webpack_require__(174);var _reactFastclick=__webpack_require__(178),_reactFastclick2=_interopRequireDefault(_reactFastclick),_componentsPublicObserable=__webpack_require__(179),_componentsPublicObserable2=_interopRequireDefault(_componentsPublicObserable),_stageIndexJsx=__webpack_require__(180),_stageIndexJsx2=_interopRequireDefault(_stageIndexJsx),_tipIndexJsx=__webpack_require__(187),_tipIndexJsx2=_interopRequireDefault(_tipIndexJsx),_shareIndexJsx=__webpack_require__(190),_shareIndexJsx2=_interopRequireDefault(_shareIndexJsx),_indexIndexJsx=__webpack_require__(193),_indexIndexJsx2=_interopRequireDefault(_indexIndexJsx);(0,_reactFastclick2.default)();var obserable=new _componentsPublicObserable2.default,worksid="5838923350",data={wxappid:"wxec2401ee9a70f3d9",wxappsecret:"fc2c8e7c243da9e8898516fa5da8cbbb"},App=function(_Component){function App(t){_classCallCheck(this,App),_get(Object.getPrototypeOf(App.prototype),"constructor",this).call(this,t),this.state={},this.viewW=document.documentElement.clientWidth,this.viewH=document.documentElement.clientHeight,window.s=this,this.zmitiMap=[{name:"北京市",log:"116.46",lat:"39.92"},{name:"上海市",log:"121.48",lat:"31.22"},{name:"天津市",log:"117.2",lat:"39.13"},{name:"重庆市",log:"106.54",lat:"29.59"},{name:"石家庄",log:"114.48",lat:"38.03"},{name:"太原市",log:"112.53",lat:"37.87"},{name:"沈阳市",log:"123.38",lat:"41.8"},{name:"长春市",log:"125.35",lat:"43.88"},{name:"哈尔滨市",log:"126.63",lat:"45.75"},{name:"杭州市",log:"120.19",lat:"30.26"},{name:"福州市",log:"119.3",lat:"26.08"},{name:"济南市",log:"106.54",lat:"29.59"},{name:"郑州市",log:"113.65",lat:"34.76"},{name:"武汉市",log:"114.31",lat:"30.52"},{name:"长沙市",log:"113",lat:"28.21"},{name:"广州市",log:"113.23",lat:"23.16"},{name:"海口市",log:"110.35",lat:"20.02"},{name:"成都市",log:"104.06",lat:"30.67"},{name:"贵阳市",log:"106.71",lat:"26.57"},{name:"昆明市",log:"102.73",lat:"25.04"},{name:"南昌市",log:"115.89",lat:"28.68"},{name:"西安市",log:"108.95",lat:"34.27"},{name:"西宁市",log:"101.74",lat:"36.56"},{name:"兰州市",log:"103.73",lat:"36.03"},{name:"南宁市",log:"106.54",lat:"29.59"},{name:"乌鲁木齐市",log:"87.68",lat:"43.77"},{name:"呼和浩特市",log:"111.65",lat:"40.82"},{name:"拉萨市",log:"91.11",lat:"29.97"},{name:"银川市",log:"106.27",lat:"38.47"},{name:"台北市",log:"121.5",lat:"25.14"},{name:"香港",log:"114.17",lat:"22.27"},{name:"澳门",log:"113.33",lat:"22.13"},{name:"合肥市",log:"117.27",lat:"31.86"},{name:"南京市",log:"118.78",lat:"32.04"}]}return _inherits(App,_Component),_createClass(App,[{key:"render",value:function(){var t={obserable:obserable,wxConfig:this.wxConfig.bind(this),changeURLPar:this.changeURLPar.bind(this),nickname:this.state.nickname},e=this.state.src&&this.state.nickname&&this.state.duration;return _react2.default.createElement("div",{className:"zmiti-main-ui"},!e&&_react2.default.createElement(_stageIndexJsx2.default,t),!e&&_react2.default.createElement(_tipIndexJsx2.default,t),!e&&_react2.default.createElement(_shareIndexJsx2.default,t),!e&&_react2.default.createElement(_indexIndexJsx2.default,t),e&&_react2.default.createElement(_shareIndexJsx2.default,t))}},{key:"dragStart",value:function(t,e){}},{key:"createList",value:function(){for(var t=this.state.picLen*this.state.picLen,e=[],i=0;i<t;i++)e.push(i);return e}},{key:"wxConfig",value:function(t,e,i,a){var n="wxfacf4a639d9e3bcc",r=a||location.href.split("#")[0],o=encodeURIComponent(r);_jquery2.default.ajax({type:"get",url:"http://api.zmiti.com/weixin/jssdk.php?type=signature&durl="+o,dataType:"jsonp",jsonp:"callback",jsonpCallback:"jsonFlickrFeed",error:function(){},success:function(a){wx.config({debug:!1,appId:n,timestamp:"1488558145",nonceStr:"Wm3WZYTPz0wzccnW",signature:a.signature,jsApiList:["checkJsApi","onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareWeibo","hideMenuItems","showMenuItems","hideAllNonBaseMenuItem","showAllNonBaseMenuItem"]}),wx.ready(function(){wx.onMenuShareTimeline({title:t,link:r,imgUrl:i,desc:e,success:function(){},cancel:function(){}}),wx.onMenuShareAppMessage({title:t,link:r,imgUrl:i,type:"link",dataUrl:"",desc:e,success:function(){},cancel:function(){}}),wx.onMenuShareQQ({title:t,link:r,imgUrl:i,desc:e,success:function(){},cancel:function(){}})})}})}},{key:"log",value:function(t){_jquery2.default.ajax({url:"http://api.zmiti.com/v2/msg/send_msg",data:{type:t.key||"log",content:JSON.stringify(t),to:""}})}},{key:"getQueryString",value:function(t){var e=new RegExp("(^|&)"+t+"=([^&]*)(&|$)","i"),i=window.location.search.substr(1).match(e);return null!=i?i[2]:null}},{key:"request",value:function(t,e){var i=this;_jquery2.default.ajax({url:"http://api.zmiti.com/v2/works/update_pvnum/",data:{worksid:worksid},success:function(t){0===t.getret}});var a=Math.random()*i.zmitiMap.length|0;_jquery2.default.ajax({url:"http://api.zmiti.com/v2/weixin/save_userview/",type:"post",data:{worksid:worksid,wxopenid:t,wxname:e,usercity:i.zmitiMap[a].name,longitude:i.zmitiMap[a].log,latitude:i.zmitiMap[a].lat}}).done(function(t){0===t.getret},function(){});var n={type:"map",address:i.zmitiMap[a].name,pos:[i.zmitiMap[a].log,i.zmitiMap[a].lat],nickname:i.nickname,headimgurl:i.headimgurl};_jquery2.default.ajax({url:"http://api.zmiti.com/v2/msg/send_msg/",type:"post",data:{type:worksid,content:JSON.stringify(n),to:n.to||""},success:function(t){}})}},{key:"getOauthurl",value:function(){var t=this;_jquery2.default.ajax({type:"post",url:"http://api.zmiti.com/v2/weixin/getwxuserinfo/",data:{code:t.getQueryString("code"),wxappid:data.wxappid,wxappsecret:data.wxappsecret},error:function(t){},success:function(e){if(0===e.getret)t.openid=e.userinfo.openid,t.nickname=e.userinfo.nickname,t.headimgurl=e.userinfo.headimgurl,window.localStorage.setItem("nickname",t.nickname),t.state.nickname=t.nickname,window.nickname=t.nickname,t.forceUpdate(),t.request(t.openid,t.nickname);else if(t.isWeiXin()){var i=t.getQueryString("nickname"),a=t.getQueryString("src"),n=t.getQueryString("duration"),r=t.getQueryString("gk"),o=window.location.href.split("?")[0];o.indexOf("?")>-1?"&":"?";i&&(o=t.changeURLPar(o,"nickname",i),o=t.changeURLPar(o,"src",a),o=t.changeURLPar(o,"duration",n),o=t.changeURLPar(o,"gk",r)),_jquery2.default.ajax({url:"http://api.zmiti.com/v2/weixin/getoauthurl/",type:"post",data:{redirect_uri:o,scope:"snsapi_userinfo",worksid:worksid,state:(new Date).getTime()+""},error:function(){},success:function(t){0===t.getret&&(window.location.href=t.url)}})}}})}},{key:"changeURLPar",value:function changeURLPar(url,arg,val){var pattern=arg+"=([^&]*)",replaceText=arg+"="+val;return url.match(pattern)?url.replace(eval("/("+arg+"=)([^&]*)/gi"),replaceText):url.match("[?]")?url+"&"+replaceText:url+"?"+replaceText}},{key:"componentDidMount",value:function(){var t=this,e=t.getQueryString("src"),i=t.getQueryString("nickname"),a=t.getQueryString("duration"),n=t.getQueryString("gk");if(e&&a){this.setState({src:e,nickname:i,gk:n,duration:a});var r=window.location.href.split("#")[0],o=window.gkShare.title.replace(/{nickname}/,i);o=o.replace(/{gk}/,n||0),o=o.replace(/{duration}/,a||""),this.wxConfig(o,window.gkShare.desc,"http://h5.zmiti.com/public/"+window.h5name+"/assets/images/300.jpg",r)}else this.wxConfig(window.share.title,window.share.desc,"http://h5.zmiti.com/public/"+window.h5name+"/assets/images/300.jpg");this.getOauthurl()}},{key:"isWeiXin",value:function(){var t=window.navigator.userAgent.toLowerCase();return"micromessenger"==t.match(/MicroMessenger/i)}}]),App}(_react.Component);_reactDom2.default.render(_react2.default.createElement(App,null),document.getElementById("fly-main-ui"))}).call(this)}finally{}},174:function(t,exports,e){var i=e(175);"string"==typeof i&&(i=[[t.id,i,""]]);e(177)(i,{});i.locals&&(t.exports=i.locals)},175:function(t,exports,e){exports=t.exports=e(176)(),exports.push([t.id,".lt-full{width:100%;height:100%;position:absolute;left:0;top:0}.zmiti-text-overflow{overflow:hidden;white-space:nowrap;word-break:break-all;text-overflow:ellipsis;-webkit-text-overflow:ellipsis}body,canvas,dd,div,dl,dt,figure,footer,h1,h2,h3,h4,header,html,li,ol,p,section,ul,video{padding:0;margin:0}a{text-decoration:none}li{list-style:none}body,html{height:100%;-webkit-tap-highlight-color:transparent}body{font-family:Helvetica Neue,Helvetica,Microsoft YaHei,\\\\5FAE\\8F6F\\96C5\\9ED1,arial,sans-serif;overflow-x:hidden;font-size:14px;background:#ff9c32}img{border:none;vertical-align:middle;width:100%;height:auto}.clearfix{clear:both}input,textarea{outline:none}#fly-main-ui{height:100%}.zmiti-main-ui{width:100%;height:100%;position:absolute}",""])},176:function(t,exports){t.exports=function(){var t=[];return t.toString=function(){for(var t=[],e=0;e<this.length;e++){var i=this[e];i[2]?t.push("@media "+i[2]+"{"+i[1]+"}"):t.push(i[1])}return t.join("")},t.i=function(e,i){"string"==typeof e&&(e=[[null,e,""]]);for(var a={},n=0;n<this.length;n++){var r=this[n][0];"number"==typeof r&&(a[r]=!0)}for(n=0;n<e.length;n++){var o=e[n];"number"==typeof o[0]&&a[o[0]]||(i&&!o[2]?o[2]=i:i&&(o[2]="("+o[2]+") and ("+i+")"),t.push(o))}},t}},177:function(t,exports,e){function i(t,e){for(var i=0;i<t.length;i++){var a=t[i],n=d[a.id];if(n){n.refs++;for(var r=0;r<n.parts.length;r++)n.parts[r](a.parts[r]);for(;r<a.parts.length;r++)n.parts.push(l(a.parts[r],e))}else{for(var o=[],r=0;r<a.parts.length;r++)o.push(l(a.parts[r],e));d[a.id]={id:a.id,refs:1,parts:o}}}}function a(t){for(var e=[],i={},a=0;a<t.length;a++){var n=t[a],r=n[0],o=n[1],s=n[2],l=n[3],u={css:o,media:s,sourceMap:l};i[r]?i[r].parts.push(u):e.push(i[r]={id:r,parts:[u]})}return e}function n(t,e){var i=h(),a=b[b.length-1];if("top"===t.insertAt)a?a.nextSibling?i.insertBefore(e,a.nextSibling):i.appendChild(e):i.insertBefore(e,i.firstChild),b.push(e);else{if("bottom"!==t.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");i.appendChild(e)}}function r(t){t.parentNode.removeChild(t);var e=b.indexOf(t);e>=0&&b.splice(e,1)}function o(t){var e=document.createElement("style");return e.type="text/css",n(t,e),e}function s(t){var e=document.createElement("link");return e.rel="stylesheet",n(t,e),e}function l(t,e){var i,a,n;if(e.singleton){var l=v++;i=g||(g=o(e)),a=u.bind(null,i,l,!1),n=u.bind(null,i,l,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(i=s(e),a=m.bind(null,i),n=function(){r(i),i.href&&URL.revokeObjectURL(i.href)}):(i=o(e),a=c.bind(null,i),n=function(){r(i)});return a(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;a(t=e)}else n()}}function u(t,e,i,a){var n=i?"":a.css;if(t.styleSheet)t.styleSheet.cssText=w(e,n);else{var r=document.createTextNode(n),o=t.childNodes;o[e]&&t.removeChild(o[e]),o.length?t.insertBefore(r,o[e]):t.appendChild(r)}}function c(t,e){var i=e.css,a=e.media;if(a&&t.setAttribute("media",a),t.styleSheet)t.styleSheet.cssText=i;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(i))}}function m(t,e){var i=e.css,a=e.sourceMap;a&&(i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */");var n=new Blob([i],{type:"text/css"}),r=t.href;t.href=URL.createObjectURL(n),r&&URL.revokeObjectURL(r)}var d={},f=function(t){var e;return function(){return"undefined"==typeof e&&(e=t.apply(this,arguments)),e}},p=f(function(){return/msie [6-9]\b/.test(self.navigator.userAgent.toLowerCase())}),h=f(function(){return document.head||document.getElementsByTagName("head")[0]}),g=null,v=0,b=[];t.exports=function(t,e){e=e||{},"undefined"==typeof e.singleton&&(e.singleton=p()),"undefined"==typeof e.insertAt&&(e.insertAt="bottom");var n=a(t);return i(n,e),function(t){for(var r=[],o=0;o<n.length;o++){var s=n[o],l=d[s.id];l.refs--,r.push(l)}if(t){var u=a(t);i(u,e)}for(var o=0;o<r.length;o++){var l=r[o];if(0===l.refs){for(var c=0;c<l.parts.length;c++)l.parts[c]();delete d[l.id]}}}};var w=function(){var t=[];return function(e,i){return t[e]=i,t.filter(Boolean).join("\n")}}()},178:function(t,exports,e){"use strict";!function(){var i=function(t){return function(){var e=t.createElement,i=8,a=1e3,n=["clientX","clientY","pageX","pageY","screenX","screenY","radiusX","radiusY"],r={downPos:{},lastPos:{}},o=function(t){if(!t)return!1;var e=t.getAttribute("disabled");return e!==!1&&null!==e},s=function(t,e){var i=e||t.currentTarget;i&&!o(i)&&i.focus()},l={input:function(t){s(t),t.stopPropagation()},textarea:function(t){s(t),t.stopPropagation()},select:function(t){s(t),t.stopPropagation()},label:function(t){var e,i=t.currentTarget.getAttribute("for");e=i?document.getElementById(i):t.currentTarget.querySelectorAll("input, textarea, select")[0],e&&s(t,e)}},u=function(t){"function"==typeof t.persist&&t.persist(),t.fastclick=!0,t.type="click",t.button=0},c=function(t,e){if("function"==typeof e.persist&&e.persist(),t)for(var i=0;i<n.length;i+=1){var a=n[i];e[a]=t[a]}},m=function(){return!r.touched&&(!r.lastTouchDate||(new Date).getTime()>r.lastTouchDate+a)},d=function(t){r.invalid=t.touches&&t.touches.length>1||r.invalid},f=function(t,e){var i=!m();i&&e.target!==r.target&&e.preventDefault(),"function"!=typeof t||i||t(e),"click"===e.type&&(r.invalid=!1,r.touched=!1,r.moved=!1)},p=function(t,e){r.invalid=!1,r.moved=!1,r.touched=!0,r.target=e.target,r.lastTouchDate=(new Date).getTime(),c(e.touches[0],r.downPos),c(e.touches[0],r.lastPos),d(e),"function"==typeof t&&t(e)},h=function(t,e){r.touched=!0,r.lastTouchDate=(new Date).getTime(),c(e.touches[0],r.lastPos),d(e),(Math.abs(r.downPos.clientX-r.lastPos.clientX)>i||Math.abs(r.downPos.clientY-r.lastPos.clientY)>i)&&(r.moved=!0),"function"==typeof t&&t(e)},g=function(t,e,i,a){if(r.touched=!0,r.lastTouchDate=(new Date).getTime(),d(a),"function"==typeof t&&t(a),!r.invalid&&!r.moved){var n=a.currentTarget.getBoundingClientRect();r.lastPos.clientX-(r.lastPos.radiusX||0)<=n.right&&r.lastPos.clientX+(r.lastPos.radiusX||0)>=n.left&&r.lastPos.clientY-(r.lastPos.radiusY||0)<=n.bottom&&r.lastPos.clientY+(r.lastPos.radiusY||0)>=n.top&&(o(a.currentTarget)||("function"==typeof e&&(c(r.lastPos,a),u(a),e(a)),!a.defaultPrevented&&l[i]&&l[i](a)))}},v=function(t,e){var i={};for(var a in e)i[a]=e[a];return i.onClick=f.bind(null,e.onClick),i.onMouseDown=f.bind(null,e.onMouseDown),i.onMouseMove=f.bind(null,e.onMouseMove),i.onMouseUp=f.bind(null,e.onMouseUp),i.onTouchStart=p.bind(null,e.onTouchStart),i.onTouchMove=h.bind(null,e.onTouchMove),i.onTouchEnd=g.bind(null,e.onTouchEnd,e.onClick,t),"function"==typeof Object.freeze&&Object.freeze(i),i};if(t.createElement=function(){var t=Array.prototype.slice.call(arguments),i=t[0],a=t[1];return i&&"string"==typeof i&&(a&&"function"==typeof a.onClick||l[i])&&(t[1]=v(i,a||{})),e.apply(null,t)},"object"==typeof t.DOM)for(var b in t.DOM)t.DOM[b]=t.createElement.bind(null,b)}},a=e(1);t.exports=i(a)}()},179:function(t,exports,e){try{(function(){"use strict";function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var i=function(){function t(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,i,a){return i&&t(e.prototype,i),a&&t(e,a),e}}(),a=function(){function t(){e(this,t),this.handlers={}}return i(t,[{key:"on",value:function(t,e){this.handlers[t]=this.handlers[t]||[],this.handlers[t].push(e)}},{key:"trigger",value:function(t){if(t.target||(t.target=this),this.handlers[t.type]instanceof Array)for(var e=this.handlers[t.type],i=0,a=e.length;i<a;i++)return e[i](t.data)}}]),t}();exports.default=a,t.exports=exports.default}).call(this)}finally{}},180:function(t,exports,e){try{(function(){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(exports,"__esModule",{value:!0});var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,i,a){return i&&t(e.prototype,i),a&&t(e,a),e}}(),o=function(t,e,i){for(var a=!0;a;){var n=t,r=e,o=i;a=!1,null===n&&(n=Function.prototype);var s=Object.getOwnPropertyDescriptor(n,r);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(o)}var u=Object.getPrototypeOf(n);if(null===u)return;t=u,e=r,i=o,a=!0,s=u=void 0}},s=e(1),l=i(s),u=e(32),c=(i(u),e(172)),m=i(c);e(181);var d=e(183),f=e(184),p=i(f),h=function(t){function e(t){a(this,e),o(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t),this.state={nickname:"",picLen:2,canvasW:0,canvasH:0,transX:0,transY:0,currentImgIndex:0,opacity:1,show:!0,imgList:window.imgList,srcElementIndex:0,gk:1,allDuration:0,duration:window.durations[0],showFailResult:!1},this.viewW=document.documentElement.clientWidth,this.viewH=document.documentElement.clientHeight,window.ss=this}return n(e,t),r(e,[{key:"render",value:function(){var t=this;return l.default.createElement("div",{className:"zmiti-stage-main-ui"},l.default.createElement("div",null,l.default.createElement("div",{className:"zmiti-stage-title"},l.default.createElement("span",null,this.state.title),l.default.createElement("span",null,"还剩：",this.state.duration,"s")),l.default.createElement("div",{className:"zmiti-stage-imglist",ref:"zmiti-stage-imglist"},l.default.createElement("div",{ref:"raw-img"}),l.default.createElement("div",null,l.default.createElement("div",null),l.default.createElement("ul",null,this.createArr().map(function(e,i){if(t.createList()[e]||0===t.createList()[e]){var a={};return i===t.state.currentImgIndex&&(a.opacity=t.state.opacity,a.WebkitTransform="translate3d("+t.state.transX+"px,"+t.state.transY+"px,0)"),l.default.createElement("li",{key:i},l.default.createElement("canvas",{className:"bitmap_"+(i/t.state.picLen|0)+"_"+i%t.state.picLen,ref:"canvas_"+e,style:a,width:t.state.canvasW,height:t.state.canvasH}))}return l.default.createElement("li",{key:i})}))))),l.default.createElement("div",{className:"zmiti-stage-puzzle",ref:"zmiti-stage-puzzle"},l.default.createElement("canvas",{draggable:"true",ref:"stage",className:"zmiti-stage-canvas",width:this.state.canvasW*this.state.picLen,height:this.state.canvasH*this.state.picLen}),l.default.createElement("div",null,l.default.createElement("span",null,"当前关卡：",this.state.gk,"/",window.durations.length))),l.default.createElement("div",{style:{height:".5rem"}}),this.state.showFailResult&&l.default.createElement("section",{className:"zmiti-stage-result"},l.default.createElement("div",null,l.default.createElement("div",{className:"zmiti-stage-result-C"},l.default.createElement("div",{style:{height:".5rem"}}),l.default.createElement("div",{className:"zmiti-stage-tip"},"没有完成关卡：",this.state.gk),l.default.createElement("div",{className:"zmiti-stage-agin"},l.default.createElement("img",{onClick:this.doAgin.bind(this),src:"./assets/images/agin.png"}))),l.default.createElement("div",{hidden:!0,className:"zmiti-stage-close"}))),this.state.toast&&l.default.createElement(p.default,{toast:this.state.toast}))}},{key:"closeResult",value:function(){this.setState({showFailResult:!1}),clearInterval(this.timer)}},{key:"doAgin",value:function(){var t=this;this.closeResult(),this.setState({duration:window.durations[this.state.gk-1]});var e=this.props.obserable;e.trigger({type:"gameStart"}),this.drawImage(),setTimeout(function(){(0,m.default)(t.refs["zmiti-stage-imglist"]).find("canvas").show()},100),this.container.children.forEach(function(e){e.name.indexOf("bitmap")>-1&&t.container.removeChild(e)})}},{key:"nextGK",value:function(){var t=this;this.setState({allDuration:this.state.allDuration+(window.durations[this.state.gk-1]-this.state.duration)});var e=this.props,i=(e.obserable,e.wxConfig),a=e.nickname,n=e.changeURLPar;this.dragCount=0;var r=window.location.href;m.default.ajax({url:"http://api.zmiti.com/v2/share/base64_image/",type:"post",data:{setcontents:this.stage.toDataURL(),setimage_w:300,setimage_h:300}}).done(function(e){if(0===e.getret){var o=e.getimageurl;r=n(r,"nickname",encodeURI(a)),r=n(r,"duration",t.state.allDuration),r=n(r,"src",o),r=n(r,"gk",t.state.gk),r=r.split("#")[0];var s=window.gkShare.title.replace(/{nickname}/,a);s=s.replace(/{gk}/,t.state.gk),s=s.replace(/{duration}/,t.state.allDuration),i(s,window.gkShare.desc,"http://h5.zmiti.com/public/"+window.h5name+"/assets/images/300.jpg",r)}}),this.setState({gk:this.state.gk+1},function(){t.state.gk>3?t.setState({picLen:3},function(){t.doAgin()}):t.doAgin()})}},{key:"gameOver",value:function(){clearInterval(this.timer),this.dragCount=0,this.setState({showFailResult:!0})}},{key:"createArr",value:function(){for(var t=[],e=Math,i=10,a=0;a<i;a++)t.push(a);var n=this.state.picLen*this.state.picLen,r=t.slice(0,n),o=t.slice(n);return r.sort(function(){return e.random()-.5}),t=r.concat(o)}},{key:"showToast",value:function(t,e){var i=this;this.setState({toast:t}),setTimeout(function(){i.setState({toast:""}),e&&e()},2e3)}},{key:"drawImage",value:function(){var t=window.imgList.length*Math.random()|0,e=this.state.imgList.splice(t,1)[0];this.objSrc=e.src,this.loadImg(e.src),this.setState({title:e.title})}},{key:"getQueryString",value:function(t){var e=new RegExp("(^|&)"+t+"=([^&]*)(&|$)","i"),i=window.location.search.substr(1).match(e);return null!=i?i[2]:null}},{key:"componentDidMount",value:function(){var t=this,e=this.getQueryString("src");!e&&this.drawImage();var i=this.props.obserable;i.on("gameStart",function(e){t.timer=setInterval(function(){return t.state.duration<=0?void t.gameOver():void t.setState({duration:t.state.duration-1})},1e3)}),i.on("nextGK",function(e){t.nextGK()})}},{key:"setDrag",value:function(){var t=this,e=this.refs.stage,i=this,a=this.props,n=a.obserable;a.nickname;this.dragCount=this.dragCount||0;var r=e.height/i.state.picLen,o=e.width/i.state.picLen,s=e.width,l=e.height;this.createList().map(function(a,u){(0,m.default)(t.refs["canvas_"+a]).on("touchstart",function(t){var a=this;r=e.height/i.state.picLen,o=e.width/i.state.picLen,s=e.width,l=e.height;var t=t.originalEvent.changedTouches[0],u=i.refs["zmiti-stage-puzzle"].offsetTop,c=i.refs["zmiti-stage-puzzle"].offsetLeft,d=t.pageX,f=t.pageY;i.setState({opacity:.5,currentImgIndex:(0,m.default)(this).parents("li").index()}),(0,m.default)(document).on("touchmove",function(t){var t=t.originalEvent.changedTouches[0];if(i.setState({transX:t.pageX-d,transY:t.pageY-f}),t.pageY>u&&t.pageX>c){var e=t.pageX-c,a=t.pageY-u,n=e/o|0,s=a/r|0,l=i.container.getChildByName("rect_"+s+"_"+n);l&&(i.container.children.forEach(function(t){t.name&&t.name.indexOf("rect_")>-1&&(t.alpha=0)}),l.alpha=1,i.stage.update())}}).on("touchend",function(t){(0,m.default)(document).off("touchend touchmove");var t=t.originalEvent.changedTouches[0];if(t.pageY>u&&t.pageX>c){var e=t.pageX-c,s=t.pageY-u,l=e/o|0,d=s/r|0,f=new createjs.Bitmap(a);if(f.x=o*l,f.y=r*d,f.name1=a.className,!i.container.getChildByName("bitmap_"+d+"_"+l)){f.name="bitmap_"+d+"_"+l;var p=i.container.getChildByName("rect_"+d+"_"+l);if(p&&(p.alpha=0,(0,m.default)(a).hide()),i.dragCount++,i.container.addChild(f),i.container.setChildIndex(f,2),i.container.children.forEach(function(t){t.name.indexOf("line")>-1&&i.container.removeChild(t)}),i.lineArr.forEach(function(t){i.container.addChild(t)}),i.lineArr1.forEach(function(t){i.container.addChild(t)}),i.stage.update(),i.dragCount>=i.state.picLen*i.state.picLen){var h=!0;i.container.children.forEach(function(t,e){t.name&&t.name.indexOf("bitmap_")>-1&&t.name!==t.name1&&(h=!1)}),h?setTimeout(function(){n.trigger({type:"showShare",data:{gk:i.state.gk,duration:i.state.allDuration+(window.durations[i.state.gk-1]-i.state.duration),src:i.objSrc,nickname:window.nickname}})},100):i.gameOver()}}}i.setState({transX:0,transY:0,opacity:1})})})}),(0,m.default)(e).on("touchstart",function(t){var t=t.originalEvent.changedTouches[0],a=i.refs["zmiti-stage-puzzle"].offsetTop,n=i.refs["zmiti-stage-puzzle"].offsetLeft,s=t.pageX-n,l=t.pageY-a,u=s/o|0,c=l/r|0,d=i.container.getChildByName("bitmap_"+c+"_"+u);if(d){d.defaultX=d.x,d.defaultY=d.y,e.lastBitmap=d;var f=null;(0,m.default)(document).on("touchmove",function(t){var t=t.originalEvent.changedTouches[0];d.x=t.pageX-s+u*o,d.y=t.pageY-l-a+c*r;var e=t.pageX-n,m=t.pageY-a,p=e/o|0,h=m/r|0;f=i.container.getChildByName("bitmap_"+h+"_"+p),i.stage.update()}).on("touchend",function(t){(0,m.default)(document).off("touchend touchmove"),t.preventDefault();var t=t.originalEvent.changedTouches[0],s=t.pageX-n,l=t.pageY-a,u=s/o|0,c=l/r|0;return f||u>=i.state.picLen||c>=i.state.picLen?(e.lastBitmap.x=e.lastBitmap.defaultX,e.lastBitmap.y=e.lastBitmap.defaultY,i.stage.update()):(e.lastBitmap.name="bitmap_"+c+"_"+u,e.lastBitmap.x=o*u,e.lastBitmap.y=r*c,i.stage.update()),!1})}})}},{key:"dragStart",value:function(t,e){}},{key:"createList",value:function(){for(var t=this.state.picLen*this.state.picLen,e=[],i=0;i<t;i++)e.push(i);return e}},{key:"createLines",value:function(){var t=this.refs.stage,e=new createjs.Stage(t);e.removeAllChildren();var i=t.getContext("2d"),a=t.width,n=t.height;i.clearRect(0,0,a,n);var r=new createjs.Container;this.container=r;for(var o=[],s=[],l=0;l<this.state.picLen-1;l++){var u=new createjs.Shape;u.graphics.setStrokeStyle(1).beginStroke("#999").moveTo(0,t.height/this.state.picLen*(l+1)).lineTo(t.width,t.height/this.state.picLen*(l+1));var c=new createjs.Shape;c.graphics.setStrokeStyle(1).beginStroke("#999").moveTo(t.width/this.state.picLen*(l+1),0).lineTo(t.width/this.state.picLen*(l+1),t.height),r.setChildIndex(u,99999),r.setChildIndex(c,99998),u.name="line_"+l,c.name="line2_"+l,o.push(u),s.push(c),r.addChild(u),r.addChild(c)}this.lineArr=o,this.lineArr1=s;for(var l=0;l<this.state.picLen;l++)for(var m=0;m<this.state.picLen;m++){var d=new createjs.Shape;d.name="rect_"+l+"_"+m,d.graphics.beginStroke("rgba(255,0,0,1)").drawRect(m*a/this.state.picLen,l*n/this.state.picLen,a/this.state.picLen,n/this.state.picLen),d.alpha=0,r.addChild(d),e.addChild(r)}e.update(),this.stage=e,e.update()}},{key:"loadImg",value:function(t){var e=new Image,i=this;e.onload=function(){var t=document.createElement("canvas"),e=Math.min(i.viewW/10*9,this.width);t.width=e,t.height=e*(this.height/this.width),i.setState({canvasW:t.width/i.state.picLen,canvasH:t.height/i.state.picLen});var a=t.getContext("2d");a.drawImage(this,0,0,t.width,t.height),i.createLines(),i.refs["raw-img"].innerHTML="",i.refs["raw-img"].appendChild(t),i.setDrag();for(var n=0;n<i.state.picLen;n++)for(var r=0;r<i.state.picLen;r++){var o=i.refs["canvas_"+(n*i.state.picLen+r)],s=o.getContext("2d"),l=n*i.state.picLen+r;o.className="bitmap_"+(l/i.state.picLen|0)+"_"+l%i.state.picLen,s.drawImage(t,t.width/i.state.picLen*r,t.height/i.state.picLen*n,t.width/i.state.picLen,t.height/i.state.picLen,0,0,t.width/i.state.picLen,t.height/i.state.picLen)}},e.src=t}}]),e}(s.Component);exports.default=(0,d.PubCom)(h),t.exports=exports.default}).call(this)}finally{}},181:function(t,exports,e){var i=e(182);"string"==typeof i&&(i=[[t.id,i,""]]);e(177)(i,{});i.locals&&(t.exports=i.locals)},182:function(t,exports,e){exports=t.exports=e(176)(),exports.push([t.id,'.lt-full{width:100%;height:100%;position:absolute;left:0;top:0}.zmiti-text-overflow{overflow:hidden;white-space:nowrap;word-break:break-all;text-overflow:ellipsis;-webkit-text-overflow:ellipsis}.zmiti-stage-main-ui{position:absolute;left:0;top:0;width:100%;height:100%;display:-webkit-box;-webkit-box-align:center;-webkit-box-pack:center;-webkit-box-orient:vertical}.zmiti-stage-main-ui>div:first-of-type{height:4.8rem}.zmiti-stage-main-ui>div:nth-of-type(2){-webkit-box-flex:1}.zmiti-stage-main-ui .zmiti-stage-canvas{border:1px solid #999}.zmiti-stage-main-ui .zmiti-stage-title{width:9rem;height:1rem;margin:.3rem auto 0;color:#fff;position:relative;line-height:1rem}.zmiti-stage-main-ui .zmiti-stage-title span{font-weight:700}.zmiti-stage-main-ui .zmiti-stage-title span:first-of-type{font-size:.6rem;text-shadow:0 1px 10px rgba(221,76,0,.4)}.zmiti-stage-main-ui .zmiti-stage-title span:nth-of-type(2){position:absolute;right:0;color:#520b09}.zmiti-stage-main-ui .zmiti-stage-puzzle{width:9rem;margin:0 auto;height:100%;text-align:center;border:1px solid #000;background:#ffdf1b;border-radius:5px;position:relative;padding:2px;display:-webkit-box;-webkit-box-align:center;-webkit-box-pack:center;-webkit-box-orient:vertical}.zmiti-stage-main-ui .zmiti-stage-puzzle:before{content:"";position:absolute;left:0;bottom:-5px;background:#f2390f;width:100%;height:10px;border-radius:5px;z-index:-1;border:1px solid #000;box-sizing:border-box}.zmiti-stage-main-ui .zmiti-stage-puzzle>div{-webkit-box-flex:1;width:100%;bottom:0;text-align:center;line-height:1rem;display:-webkit-box;-webkit-box-align:center;-webkit-box-pack:center;-webkit-box-orient:vertical}.zmiti-stage-main-ui .zmiti-stage-puzzle>div span{color:#520b09;font-weight:700;display:block;font-size:.5rem}.zmiti-stage-main-ui .zmiti-stage-puzzle canvas{left:50%;top:2px;background:#fff}.zmiti-stage-main-ui .zmiti-stage-imglist{width:9rem;height:3rem;margin:.2rem auto .4rem;display:-webkit-box;-webkit-box-align:center;-webkit-box-pack:center;-webkit-box-orient:horizontal}.zmiti-stage-main-ui .zmiti-stage-imglist>div{height:100%;position:relative;border-radius:2px}.zmiti-stage-main-ui .zmiti-stage-imglist>div:after{content:"";position:absolute;width:100%;height:10px;background:#f2390f;left:0;bottom:-4px;border-radius:2px;z-index:-1}.zmiti-stage-main-ui .zmiti-stage-imglist>div:before{content:"";position:absolute;width:100%;height:100%;left:0;top:0;background:-webkit-linear-gradient(bottom,#fbff89,#fb8561 78%,#fff980);box-shadow:0 0 20px rgba(0,0,0,.2);border-radius:2px}.zmiti-stage-main-ui .zmiti-stage-imglist>div:first-of-type{width:3rem;margin-right:10px}.zmiti-stage-main-ui .zmiti-stage-imglist>div:first-of-type canvas{width:2.6rem;height:2.6rem;margin:.2rem;z-index:10;position:relative;-webkit-transform-origin:left top;transform-origin:left top}.zmiti-stage-main-ui .zmiti-stage-imglist>div:nth-of-type(2){-webkit-box-flex:1;display:-webkit-box;-webkit-box-align:center;-webkit-box-pack:center;-webkit-box-orient:horizontal}.zmiti-stage-main-ui .zmiti-stage-imglist>div:nth-of-type(2)>div{width:.4rem}.zmiti-stage-main-ui .zmiti-stage-imglist>div:nth-of-type(2)>ul{position:relative;z-index:10;height:2.2rem;-webkit-box-flex:1;margin-top:.4rem;height:2.4rem}.zmiti-stage-main-ui .zmiti-stage-imglist>div:nth-of-type(2)>ul li{box-sizing:border-box;height:1rem;width:1rem;float:left;background:#df7300;margin-left:1px;margin-top:1px;position:relative}.zmiti-stage-main-ui .zmiti-stage-imglist>div:nth-of-type(2)>ul li:before{content:"";position:absolute;width:100%;height:3px;background:#f2390f;border-bottom:1px solid #000;left:0;top:0}.zmiti-stage-main-ui .zmiti-stage-imglist>div:nth-of-type(2)>ul li canvas{width:1rem;height:1rem;position:absolute;left:0;top:0}.zmiti-stage-main-ui .zmiti-stage-result{position:absolute;z-index:1000;width:100%;height:100%;left:0;top:0;background:rgba(0,0,0,.7);display:-webkit-box;-webkit-box-align:center;-webkit-box-pack:center;-webkit-box-orient:vertical}.zmiti-stage-main-ui .zmiti-stage-result>div .zmiti-stage-result-C{width:6rem;height:4rem;background:#d6d4c5;border-radius:10px;position:relative}.zmiti-stage-main-ui .zmiti-stage-result>div .zmiti-stage-result-C:after{content:"";position:absolute;width:100%;height:110px;z-index:-1;bottom:-5px;border-radius:10px;background:#c36000}.zmiti-stage-main-ui .zmiti-stage-result>div .zmiti-stage-result-C .zmiti-stage-tip{width:100%;text-align:center;color:#ea0000;background:#fff;height:1rem;line-height:1rem;width:80%;font-weight:700;margin:.5rem auto 0;border-radius:4px}.zmiti-stage-main-ui .zmiti-stage-result>div .zmiti-stage-result-C .zmiti-stage-agin{text-align:center;margin-top:.5rem}.zmiti-stage-main-ui .zmiti-stage-result>div .zmiti-stage-result-C .zmiti-stage-agin img{opacity:1;width:3rem}.zmiti-stage-main-ui .zmiti-stage-result>div .zmiti-stage-close{text-align:center;margin-top:1rem}.zmiti-stage-main-ui .zmiti-stage-result>div .zmiti-stage-close img{width:1rem}',""]);
},183:function(t,exports,e){try{(function(){"use strict";function t(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(exports,"__esModule",{value:!0});var n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(t[a]=i[a])}return t},r=function(){function t(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,i,a){return i&&t(e.prototype,i),a&&t(e,a),e}}(),o=function(t,e,i){for(var a=!0;a;){var n=t,r=e,o=i;a=!1,null===n&&(n=Function.prototype);var s=Object.getOwnPropertyDescriptor(n,r);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(o)}var u=Object.getPrototypeOf(n);if(null===u)return;t=u,e=r,i=o,a=!0,s=u=void 0}},s=e(1),l=t(s),u=e(172),c=t(u),m=function(t){return function(e){function s(t){i(this,s),o(Object.getPrototypeOf(s.prototype),"constructor",this).call(this,t),this.state={}}return a(s,e),r(s,[{key:"componentWillMount",value:function(){}},{key:"log",value:function(t){c.default.ajax({url:window.baseUrl+"msg/send_msg",data:{type:t.key||"log",content:JSON.stringify(t)}})}},{key:"render",value:function(){var e={log:this.log};return l.default.createElement(t,n({},e,this.props,this.state))}}]),s}(s.Component)};exports.PubCom=m}).call(this)}finally{}},184:function(t,exports,e){try{(function(){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(exports,"__esModule",{value:!0});var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,i,a){return i&&t(e.prototype,i),a&&t(e,a),e}}(),o=function(t,e,i){for(var a=!0;a;){var n=t,r=e,o=i;a=!1,null===n&&(n=Function.prototype);var s=Object.getOwnPropertyDescriptor(n,r);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(o)}var u=Object.getPrototypeOf(n);if(null===u)return;t=u,e=r,i=o,a=!0,s=u=void 0}},s=e(1),l=i(s),u=e(183);e(185);var c=e(172),m=(i(c),function(t){function e(t){a(this,e),o(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t),this.state={},this.viewW=document.documentElement.clientWidth,this.viewH=document.documentElement.clientHeight}return n(e,t),r(e,[{key:"render",value:function(){return l.default.createElement("div",{className:"zmiti-toast-main"},l.default.createElement("div",{className:"zmiti-toast-main-ui"},this.props.toast||""))}},{key:"componentDidMount",value:function(){}}]),e}(s.Component));exports.default=(0,u.PubCom)(m),t.exports=exports.default}).call(this)}finally{}},185:function(t,exports,e){var i=e(186);"string"==typeof i&&(i=[[t.id,i,""]]);e(177)(i,{});i.locals&&(t.exports=i.locals)},186:function(t,exports,e){exports=t.exports=e(176)(),exports.push([t.id,".lt-full{width:100%;height:100%;position:absolute;left:0;top:0}.zmiti-text-overflow{overflow:hidden;white-space:nowrap;word-break:break-all;text-overflow:ellipsis;-webkit-text-overflow:ellipsis}.zmiti-toast-main-ui{background:rgba(0,0,0,.7);position:fixed;top:30%;left:50%;-webkit-transform:translate3d(-50%,0,0);transform:translate3d(-50%,0,0);padding:10px;text-align:center;color:#fff;width:50%;border-radius:10px;z-index:99999;font-size:.5rem}.zmiti-toast-main{position:absolute;width:100%;height:100%;left:0;top:0;background:rgba(0,0,0,.5);z-index:10001}",""])},187:function(t,exports,e){try{(function(){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(exports,"__esModule",{value:!0});var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,i,a){return i&&t(e.prototype,i),a&&t(e,a),e}}(),o=function(t,e,i){for(var a=!0;a;){var n=t,r=e,o=i;a=!1,null===n&&(n=Function.prototype);var s=Object.getOwnPropertyDescriptor(n,r);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(o)}var u=Object.getPrototypeOf(n);if(null===u)return;t=u,e=r,i=o,a=!0,s=u=void 0}},s=e(1),l=i(s),u=e(32),c=(i(u),e(172));i(c);e(188);var m=e(183),d=function(t){function e(t){a(this,e),o(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t),this.state={show:!0,showBtn:!0},this.viewW=document.documentElement.clientWidth,this.viewH=document.documentElement.clientHeight}return n(e,t),r(e,[{key:"render",value:function(){var t={background:"url(./assets/images/tip.jpg) no-repeat center center",backgroundSize:"cover",display:this.state.show?"block":"none"};return l.default.createElement("div",{className:"zmiti-tip-main-ui "+this.state.className,style:t},l.default.createElement("div",{className:"zmiti-tip-hand"},l.default.createElement("img",{src:"./assets/images/hand.png"})),this.state.showBtn&&l.default.createElement("div",{className:"zmiti-tip-btn",onClick:this.startGame.bind(this)},l.default.createElement("img",{src:"./assets/images/btn.png"}),l.default.createElement("span",null,"移动拼图碎片，拼合成完整图片即可过关。")))}},{key:"startGame",value:function(){this.setState({show:!1});var t=this.props.obserable;t.trigger({type:"gameStart"})}},{key:"showToast",value:function(t){var e=this;this.setState({toast:t}),setTimeout(function(){e.setState({toast:""})},2e3)}},{key:"componentDidMount",value:function(){var t=this,e=this.props.obserable;e.on("toggleTips",function(e){t.setState({show:e}),e&&setTimeout(function(){t.setState({showBtn:!0})},1e3)})}}]),e}(s.Component);exports.default=(0,m.PubCom)(d),t.exports=exports.default}).call(this)}finally{}},188:function(t,exports,e){var i=e(189);"string"==typeof i&&(i=[[t.id,i,""]]);e(177)(i,{});i.locals&&(t.exports=i.locals)},189:function(t,exports,e){exports=t.exports=e(176)(),exports.push([t.id,".lt-full{width:100%;height:100%;position:absolute;left:0;top:0}.zmiti-text-overflow{overflow:hidden;white-space:nowrap;word-break:break-all;text-overflow:ellipsis;-webkit-text-overflow:ellipsis}.zmiti-tip-main-ui{position:absolute;width:100%;height:100%;left:0;top:0;z-index:10}.zmiti-tip-main-ui .zmiti-tip-hand{position:absolute;width:1rem;left:45%;top:2.5rem;-webkit-animation:move 2s 3;animation:move 2s 3}.zmiti-tip-main-ui .zmiti-tip-btn{position:absolute;width:4.5rem;top:3rem;right:.2rem}.zmiti-tip-main-ui .zmiti-tip-btn span{position:absolute;top:.3rem;font-weight:700;z-index:10;left:0;width:90%;left:5%;font-size:12px}@-webkit-keyframes move{to{-webkit-transform:translate3d(0,4rem,0);transform:translate3d(0,4rem,0)}}",""])},190:function(module,exports,__webpack_require__){try{(function(){"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function t(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,i,a){return i&&t(e.prototype,i),a&&t(e,a),e}}(),_get=function(t,e,i){for(var a=!0;a;){var n=t,r=e,o=i;a=!1,null===n&&(n=Function.prototype);var s=Object.getOwnPropertyDescriptor(n,r);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(o)}var u=Object.getPrototypeOf(n);if(null===u)return;t=u,e=r,i=o,a=!0,s=u=void 0}},_react=__webpack_require__(1),_react2=_interopRequireDefault(_react),_reactDom=__webpack_require__(32),_reactDom2=_interopRequireDefault(_reactDom),_jquery=__webpack_require__(172),_jquery2=_interopRequireDefault(_jquery);__webpack_require__(191);var _componentsPublicPubJsx=__webpack_require__(183),data={wxappid:"wxec2401ee9a70f3d9",wxappsecret:"fc2c8e7c243da9e8898516fa5da8cbbb"},ZmitiShareApp=function(_Component){function ZmitiShareApp(t){_classCallCheck(this,ZmitiShareApp),_get(Object.getPrototypeOf(ZmitiShareApp.prototype),"constructor",this).call(this,t),this.state={className:"hide"},this.viewW=document.documentElement.clientWidth,this.viewH=document.documentElement.clientHeight}return _inherits(ZmitiShareApp,_Component),_createClass(ZmitiShareApp,[{key:"getQueryString",value:function(t){var e=new RegExp("(^|&)"+t+"=([^&]*)(&|$)","i"),i=window.location.search.substr(1).match(e);return null!=i?i[2]:null}},{key:"render",value:function(){var t=this,e=this,i={background:"url(./assets/images/arron1.png) no-repeat center  top",backgroundSize:"cover"},a=e.getQueryString("src");return _react2.default.createElement("div",{className:"zmiti-share-main-ui "+this.state.className},_react2.default.createElement("div",{className:"zmiti-share-bg"},_react2.default.createElement("div",{className:"zmiti-share-info"},_react2.default.createElement("div",null,decodeURI(this.state.nickname||"我"),"在“中国成就”拼图游戏中"),_react2.default.createElement("div",null,"用时:",this.state.duration||0,"s"),_react2.default.createElement("div",null,"成功闯到第",this.state.gk,"关!"),_react2.default.createElement("div",{className:"zmiti-puzzle-img"},_react2.default.createElement("img",{src:this.state.src})),(this.state.gk>=window.durations.length||a)&&_react2.default.createElement("div",{className:"zmiti-medo"},_react2.default.createElement("a",{href:window.href},_react2.default.createElement("img",{src:"./assets/images/medo.png"}))),(this.state.gk||0)<window.durations.length&&!a&&_react2.default.createElement("div",{className:"zmiti-continu"},_react2.default.createElement("div",{onClick:this.showMask.bind(this),className:this.state.shareClass||"",onTouchStart:function(){t.setState({shareClass:"active"})},onTouchEnd:function(){t.setState({shareClass:""})}},"分享"),_react2.default.createElement("div",{style:{width:20}}),_react2.default.createElement("div",{className:this.state.nextClass||"",onClick:this.nextGk.bind(this),onTouchStart:function(){t.setState({nextClass:"active"})},onTouchEnd:function(){t.setState({nextClass:""})}},"下一关")))),this.state.showMask&&_react2.default.createElement("div",{onTouchStart:function(){t.setState({showMask:!1})},className:"zmiti-mask",style:i}))}},{key:"showMask",value:function(){this.setState({showMask:!0})}},{key:"nextGk",value:function(){var t=this.props.obserable;this.setState({className:"hide"}),t.trigger({type:"nextGK"})}},{key:"showToast",value:function(t){var e=this;this.setState({toast:t}),setTimeout(function(){e.setState({toast:""})},2e3)}},{key:"componentDidMount",value:function(){var t=this,e=this.props,i=e.obserable,a=(e.wxConfig,e.log,e.nickname),n=(e.changeURLPar,e.border,e.file,e.wish,e.transX,e.transY,this),r=n.getQueryString("src"),a=n.getQueryString("nickname"),o=n.getQueryString("duration"),s=n.getQueryString("gk");r&&o&&this.setState({src:r,className:"",nickname:a,duration:o,gk:s}),i.on("showShare",function(e){var i={className:"",duration:e.duration,gk:e.gk,nickname:e.nickname};e.src&&(i.src=e.src),t.setState(i)})}},{key:"changeURLPar",value:function changeURLPar(url,arg,val){var pattern=arg+"=([^&]*)",replaceText=arg+"="+val;return url.match(pattern)?url.replace(eval("/("+arg+"=)([^&]*)/gi"),replaceText):url.match("[?]")?url+"&"+replaceText:url+"?"+replaceText}}]),ZmitiShareApp}(_react.Component);exports.default=(0,_componentsPublicPubJsx.PubCom)(ZmitiShareApp),module.exports=exports.default}).call(this)}finally{}},191:function(t,exports,e){var i=e(192);"string"==typeof i&&(i=[[t.id,i,""]]);e(177)(i,{});i.locals&&(t.exports=i.locals)},192:function(t,exports,e){exports=t.exports=e(176)(),exports.push([t.id,'.lt-full{width:100%;height:100%;position:absolute;left:0;top:0}.zmiti-text-overflow{overflow:hidden;white-space:nowrap;word-break:break-all;text-overflow:ellipsis;-webkit-text-overflow:ellipsis}.zmiti-share-main-ui{position:absolute;left:0;top:0;width:10rem;height:100%;z-index:1040;overflow:hidden;background:#000}.zmiti-share-main-ui.hide{display:none}.zmiti-share-main-ui .zmiti-share-bg{width:12rem;height:90%;top:20%;position:absolute;left:-1rem;background:#ff9c32;z-index:10;border-radius:30%}.zmiti-share-main-ui .zmiti-share-bg .zmiti-share-info{width:7rem;height:9rem;margin:-1rem auto;background:#ffdf1b;border-radius:10px;border:1px solid #000;position:relative}.zmiti-share-main-ui .zmiti-share-bg .zmiti-share-info:before{content:"";position:absolute;width:100%;height:40px;bottom:-6px;z-index:-1;box-sizing:border-box;background:#c36000;border:1px solid #000;left:0;border-radius:10px}.zmiti-share-main-ui .zmiti-share-bg .zmiti-share-info>div{text-align:center;font-weight:700;margin:8px auto;font-size:.5rem;width:6rem}.zmiti-share-main-ui .zmiti-share-bg .zmiti-share-info .zmiti-puzzle-img{width:4rem;height:4rem;background:#fff;padding:10px;border-radius:5px;border:1px solid #000;margin:0 auto}.zmiti-share-main-ui .zmiti-share-bg .zmiti-medo{width:7rem;margin:1rem auto!important}.zmiti-share-main-ui .zmiti-share-bg .zmiti-medo img{width:5rem}.zmiti-share-main-ui .zmiti-share-bg .zmiti-continu{width:7rem;margin:1rem auto!important;display:-webkit-box;-webkit-box-align:center;-webkit-box-pack:center;-webkit-box-orient:horizontal}.zmiti-share-main-ui .zmiti-share-bg .zmiti-continu>div{text-align:center;height:1.2rem;line-height:1.2rem;border-radius:20px;color:#fff;font-weight:700;background:#f53700}.zmiti-share-main-ui .zmiti-share-bg .zmiti-continu>div:nth-of-type(2){opacity:0}.zmiti-share-main-ui .zmiti-share-bg .zmiti-continu>div:first-of-type,.zmiti-share-main-ui .zmiti-share-bg .zmiti-continu>div:nth-of-type(3){-webkit-box-flex:1;position:relative}.zmiti-share-main-ui .zmiti-share-bg .zmiti-continu>div:first-of-type.active,.zmiti-share-main-ui .zmiti-share-bg .zmiti-continu>div:nth-of-type(3).active{-webkit-transform:translate3d(0,5px,0);transform:translate3d(0,5px,0)}.zmiti-share-main-ui .zmiti-share-bg .zmiti-continu>div:first-of-type.active:after,.zmiti-share-main-ui .zmiti-share-bg .zmiti-continu>div:first-of-type.active:before,.zmiti-share-main-ui .zmiti-share-bg .zmiti-continu>div:nth-of-type(3).active:after,.zmiti-share-main-ui .zmiti-share-bg .zmiti-continu>div:nth-of-type(3).active:before{display:none}.zmiti-share-main-ui .zmiti-share-bg .zmiti-continu>div:first-of-type:after,.zmiti-share-main-ui .zmiti-share-bg .zmiti-continu>div:first-of-type:before,.zmiti-share-main-ui .zmiti-share-bg .zmiti-continu>div:nth-of-type(3):after,.zmiti-share-main-ui .zmiti-share-bg .zmiti-continu>div:nth-of-type(3):before{content:"";border-radius:15px;position:absolute;z-index:-1;width:100%;height:80%;left:0;bottom:0}.zmiti-share-main-ui .zmiti-share-bg .zmiti-continu>div:first-of-type:after,.zmiti-share-main-ui .zmiti-share-bg .zmiti-continu>div:nth-of-type(3):after{background:#e13200;bottom:-3px;width:98%;left:1%}.zmiti-share-main-ui .zmiti-share-bg .zmiti-continu>div:first-of-type:before,.zmiti-share-main-ui .zmiti-share-bg .zmiti-continu>div:nth-of-type(3):before{width:102%;left:-1%;background:#751c00;bottom:-6px}.zmiti-share-main-ui .zmiti-mask{width:100%;height:100%;left:0;top:0;z-index:1000;position:absolute}',""])},193:function(t,exports,e){try{(function(){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function n(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(exports,"__esModule",{value:!0});var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var a=e[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}return function(e,i,a){return i&&t(e.prototype,i),a&&t(e,a),e}}(),o=function(t,e,i){for(var a=!0;a;){var n=t,r=e,o=i;a=!1,null===n&&(n=Function.prototype);var s=Object.getOwnPropertyDescriptor(n,r);if(void 0!==s){if("value"in s)return s.value;var l=s.get;if(void 0===l)return;return l.call(o)}var u=Object.getPrototypeOf(n);if(null===u)return;t=u,e=r,i=o,a=!0,s=u=void 0}},s=e(1),l=i(s),u=e(32),c=(i(u),e(172)),m=(i(c),e(173));i(m);e(194);var d=e(183),f=function(t){function e(t){a(this,e),o(Object.getPrototypeOf(e.prototype),"constructor",this).call(this,t),this.state={className:"active",startBtnClass:""},this.viewW=document.documentElement.clientWidth,this.viewH=document.documentElement.clientHeight,window.s=this}return n(e,t),r(e,[{key:"render",value:function(){var t=this;return l.default.createElement("div",{className:"zmiti-index-main-ui "+this.state.className},l.default.createElement("img",{src:"./assets/images/top1.png",className:"zmiti-index-top"}),l.default.createElement("div",{className:"zmiti-index-chengjiu"},l.default.createElement("img",{src:"./assets/images/chengjiu.png"})),l.default.createElement("div",{className:"zmiti-index-text"},l.default.createElement("img",{src:"./assets/images/text.png"})),l.default.createElement("div",{className:"zmiti-index-logo"},l.default.createElement("img",{src:"./assets/images/logo.png"})),l.default.createElement("img",{src:"./assets/images/bottom.png",className:"zmiti-index-bottom"}),l.default.createElement("div",{onClick:this.beginGame.bind(this),className:"zmiti-index-gamestart "+this.state.startBtnClass,onTouchStart:function(){t.setState({startBtnClass:"active"})},onTouchEnd:function(){t.setState({startBtnClass:""})}},"开始游戏"))}},{key:"beginGame",value:function(){this.setState({className:"hide"})}},{key:"showToast",value:function(t){var e=this;this.setState({toast:t}),setTimeout(function(){e.setState({toast:""})},2e3)}},{key:"componentDidMount",value:function(){var t=this,e=this.props.obserable;e.on("toggleIndex",function(e){t.setState({className:e})})}}]),e}(s.Component);exports.default=(0,d.PubCom)(f),t.exports=exports.default}).call(this)}finally{}},194:function(t,exports,e){var i=e(195);"string"==typeof i&&(i=[[t.id,i,""]]);e(177)(i,{});i.locals&&(t.exports=i.locals)},195:function(t,exports,e){exports=t.exports=e(176)(),exports.push([t.id,'.lt-full{width:100%;height:100%;position:absolute;left:0;top:0}.zmiti-text-overflow{overflow:hidden;white-space:nowrap;word-break:break-all;text-overflow:ellipsis;-webkit-text-overflow:ellipsis}.zmiti-index-main-ui{width:100%;height:100%;transition:.3s;left:0;top:0;background:#f46a1c;z-index:100;position:absolute}.zmiti-index-main-ui.hide{display:none}.zmiti-index-main-ui .zmiti-index-bottom,.zmiti-index-main-ui .zmiti-index-top{position:absolute;z-index:-1}.zmiti-index-main-ui .zmiti-index-chengjiu{width:8rem;margin:1.4rem auto 0}.zmiti-index-main-ui .zmiti-index-text{width:9rem;margin:.5rem auto 0}.zmiti-index-main-ui .zmiti-index-logo{width:4rem;margin:.2rem auto 0}.zmiti-index-main-ui .zmiti-index-gamestart{width:4rem;margin:.2rem auto 0;position:relative;background:#ffdf1b;text-align:center;font-weight:700;color:#f2400f;line-height:1rem;height:1rem;border-radius:15px}.zmiti-index-main-ui .zmiti-index-gamestart.active{-webkit-transform:translate3d(0,5px,0);transform:translate3d(0,5px,0)}.zmiti-index-main-ui .zmiti-index-gamestart.active:after,.zmiti-index-main-ui .zmiti-index-gamestart.active:before{display:none}.zmiti-index-main-ui .zmiti-index-gamestart:after,.zmiti-index-main-ui .zmiti-index-gamestart:before{content:"";border-radius:15px;position:absolute;z-index:-1;width:100%;height:80%;left:0;bottom:0}.zmiti-index-main-ui .zmiti-index-gamestart:after{background:#ff8009;bottom:-4px;width:98%;left:1%}.zmiti-index-main-ui .zmiti-index-gamestart:before{width:102%;left:-1%;background:#751c00;bottom:-8px}.zmiti-index-main-ui .zmiti-index-bottom{bottom:0}',""])}});